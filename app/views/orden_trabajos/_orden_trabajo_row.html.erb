
  <tr id="<%= dom_id(@orden_trabajo) %>">
    <%= form_with model: @orden_trabajo,
                  remote: true,
                  data: { action: "turbo:submit-end->orden-trabajo#actualizado" } do |f| %>

      <!-- OT -->
      <td>
        <button type="button" class="btn btn-info btn-sm" data-action="click->orders#copy" data-id=<%= @orden_trabajo.id %>>
          <%= @orden_trabajo.trnum %>
        </button>
      </td>
      <td><%= link_to @orden_trabajo.clinom, orden_trabajo_path(@orden_trabajo) %></td>
      <td><%= @orden_trabajo.nomprod.first(30) %></td>
      <td><%= @orden_trabajo.trcan %></td>
      <td>
        <%= f.select :estado_actual,
                     ["Pendiente", "Cliente", "Ismael diseño", "Edu diseño", "Miguel diseño",
                      "Gina", "Diseño 3ro", "Control", "CTP", "Impresión", "Terminación", "Empaque"],
                     {}, class: "form-select form-select-sm" %>
      </td>
      <td>
        <select id="orden_trabajo_procesos_<%= orden_trabajo.id %>"
                class="selectpicker"
                multiple
                title="Procesos"
                data-live-search="true"
                data-width="100%"
                data-controller="selectpicker">
          <% OrdenTrabajo::POST.each do |elemento_post| %>
            <option value="<%= elemento_post %>"
                    <%= "selected" if cadenatovector(orden_trabajo.procesos).include?(elemento_post) %>>
              <%= elemento_post %>
            </option>
          <% end %>
        </select>

        <%= f.hidden_field :procesos, id: "hidden_procesos_#{orden_trabajo.id}" %>
      </td>
      <td>
        <%= f.date_field :fecentr,
                         value: @orden_trabajo.fecentr,
                         class: "form-control form-control-sm" %>
      </td>
      <td>
        <%= f.text_field :observaciones,
                         value: @orden_trabajo.observaciones,
                         placeholder: "Observaciones",
                         class: "form-control form-control-sm",
                         size: 20 %>
      </td>
      <td class="text-center">
            <%= f.submit "✅ Ok",
                         class: "btn btn-primary btn-sm",
                         data: { orden_trabajo_target: "submitButton" } %>
          </td>
      <td class="text-center">
        <%= link_to orden_trabajo_path(@orden_trabajo),
                    data: {
                      turbo_method: :delete,
                      turbo_confirm: "¿Eliminar esta orden?"
                    },
                    class: "btn btn-danger btn-sm" do %>
          <i class="fa-solid fa-trash"></i>
        <% end %>
      </td>
    <% end %>
  </tr>


