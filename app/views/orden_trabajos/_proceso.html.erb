<div class="d-flex justify-content-around flex-wrap">
  <% ["en espera", "LISTO"].each do |estado| %>
    <div class="container col-md-5">
      <h1 class="mt-3 p-2 text-white text-center rounded <%= estado == "en espera" ? 'bg-danger' : 'bg-success' %>">
        <strong><%= proceso.upcase %> <%= estado %></strong>
      </h1>
      <table class="table table-striped table-bordered shadow-sm">
        <thead class="bg-secondary text-white">
          <tr>
            <th>OT</th>
            <th>Cliente</th>
            <th>Producto</th>
            <th>Fecha Entrega</th>
          </tr>
        </thead>
        <tbody>
          <% @orden_trabajos.each do |orden_trabajo| %>
            <% procesos = cadenatovector(orden_trabajo.procesos) %>
            <% if procesos.include?(proceso) %>
              <% if estado == "en espera" &&
                    !["Impresi贸n", "Pendiente", "Terminaci贸n", "Empaque"].include?(orden_trabajo.estado_actual) %>
                <tr>
                  <td><%= orden_trabajo.clinom %></td>
                  <td><%= orden_trabajo.nomprod.first(25) %></td>
                  <td><%= orden_trabajo.deadline.try(:strftime, "%d-%m-%Y") %></td>
                </tr>
              <% elsif estado == "LISTO" && orden_trabajo.estado_actual.match?(/Impresi贸n|Terminaci贸n/i) %>
                <tr>
                  <td><%= orden_trabajo.clinom %></td>
                  <td><%= orden_trabajo.nomprod.first(25) %></td>
                  <td><%= orden_trabajo.deadline.try(:strftime, "%d-%m-%Y") %></td>
                </tr>
              <% end %>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
</div>
