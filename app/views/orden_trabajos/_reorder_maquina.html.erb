<div class="my-4 p-3 border rounded shadow-sm">

  <h3 class="text-center mb-3 bg-primary text-white p-2 rounded">
    <strong><%= proceso %></strong>
  </h3>

  <table class="table table-striped table-hover text-center align-middle"
         data-controller="sortable"
         data-sortable-url-value="<%= reorder_orden_trabajos_path(proceso: proceso) %>">

    <thead class="table-dark">
      <tr>
        <th>Posición</th>
        <th>N° OT</th>
        <th>Cliente</th>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Papel</th>
        <th>Gramaje</th>
        <th>Color</th>
      </tr>
    </thead>

    <tbody data-sortable-target="tbody"
       data-sortable-url-value="<%= reorder_orden_trabajos_path(proceso: proceso) %>">

      <% @orden_trabajos
          .select { |ot| cadenatovector(ot.procesos).include?(proceso) }
          .sort_by(&:position)
          .each do |orden| %>

        <tr data-id="<%= orden.id %>" draggable="true">
          <td><%= orden.position %></td>
          
          <td class="
            <%=
              case orden.priority
              when 'Alta'  then 'bg-danger text-white'
              when 'Media' then 'bg-warning'
              else              'bg-success text-white'
              end
            %>">
            <strong><%= orden.trnum %></strong>
          </td>          
          <td><%= link_to orden.clinom, orden_trabajo_path(orden)%></td>
          <td><%= orden.nomprod.first(40) %></td>
          <td><%= orden.trcan %></td>
          <td><%= orden.papel %></td>
          <td><%= orden.gramaje %></td>
          <td><%= orden.colores %></td>
        </tr>

      <% end %>
    </tbody>
  </table>
</div>
