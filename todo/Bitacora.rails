1.- reestructuracion de rutas abreviadas y nuevos forms vinculados

âœ… config/routes.rb â€” versiÃ³n hÃ­brida optimizada
Rails.application.routes.draw do
  # ğŸ  PÃ¡gina principal: lista de Ã³rdenes de trabajo
  root to: "orden_trabajos#index"

  # =========================================================
  # ğŸ“¦ Ã“RDENES DE TRABAJO (REST completo + extras)
  # =========================================================
  resources :orden_trabajos do
    collection do
      # ğŸ” Reordenamiento con drag & drop
      get  :index_reorder
      post :reorder

      # ğŸ“… Vistas especÃ­ficas
      get :proximo_vencer
      get :planificacion_taller
      get :planificacion_tallerPDF
      get :nueva_ot

      # ğŸ–¨ï¸ Vistas post impresiÃ³n
      get :listado
      get :offset1
      get :offset2
      get :digital
      get :post1
      get :post2
      get :post3
      get :post4
      get :post5
      get :post6
      get :post7
    end

    # ğŸ§© Ruta miembro para copiar una OT
    member do
      get :copy
    end
  end

  # =========================================================
  # ğŸ“¥ IMPORTACIÃ“N DESDE EXCEL
  # =========================================================
  resources :orden_trabajos_imports, only: [:new, :create]

  # =========================================================
  # ğŸ§­ RUTAS â€œCORTASâ€ (alias legibles)
  # =========================================================
  # ğŸ”¸ Estas rutas son alias que apuntan a las acciones del mismo controlador
  # ğŸ”¸ No generan conflictos porque tienen nombres distintos de los helpers Rails estÃ¡ndar

  get "proximo_vencer",         to: "orden_trabajos#proximo_vencer",         as: :proximo_vencer_short
  get "planificacion_taller",   to: "orden_trabajos#planificacion_taller",   as: :planificacion_taller_short
  get "planificacion_tallerPDF",to: "orden_trabajos#planificacion_tallerPDF",as: :planificacion_tallerPDF_short
  get "nueva_ot",               to: "orden_trabajos#nueva_ot",               as: :nueva_ot_short
end


ğŸ§© CÃ³mo usarlo
TenÃ©s dos formas vÃ¡lidas de llamar a las rutas en tus vistas:
1ï¸âƒ£ Forma REST oficial (mÃ¡s robusta)
<%= link_to "PrÃ³ximo a vencer", proximo_vencer_orden_trabajos_path %>

2ï¸âƒ£ Forma abreviada (alias)
<%= link_to "PrÃ³ximo a vencer", proximo_vencer_short_path %>

Ambas apuntan al mismo mÃ©todo OrdenTrabajosController#proximo_vencer,
pero la segunda tiene una URL mÃ¡s corta (/proximo_vencer en vez de /orden_trabajos/proximo_vencer).

ğŸ’¡ Por quÃ© esta versiÃ³n es ideal
âœ… Mantiene todas las rutas RESTful agrupadas bajo orden_trabajos.
âœ… Evita duplicaciÃ³n o conflictos de helpers (as: distintos).
âœ… Te da la opciÃ³n de usar URLs cortas en el menÃº de navegaciÃ³n, sin romper convenciones.
âœ… Compatible con tus vistas actuales (index, listado, proximo_vencer, etc.).
âœ… Escalable: si mÃ¡s adelante aÃ±adÃ­s controladores o mÃ³dulos (por ejemplo, orden_trabajos_api), no choca con las rutas actuales.

Â¿QuerÃ©s que te deje el bloque <nav> de tu application.html.erb actualizado con estos nuevos alias (*_short_path), listo para pegar y probar?

IMPRESION PANTALLAS

POST1
<!-- ğŸŸ¦ Tabla Laminado -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Lam") %>
<!-- ğŸŸ¨ Tabla Buv -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Buv") %>

POST2
<!-- ğŸŸ¦ Tabla TipografÃ­a -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Tipografia") %>
<!-- ğŸŸ¨ Tabla Fidia -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Fidia") %>

POST3
<!-- ğŸŸ© Tabla Baum -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Baum") %>
<!-- ğŸŸ¦ Tabla Renz -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Renz") %>

POST4
<!-- ğŸŸ© Tabla Duplo -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Duplo") %>
<!-- ğŸŸ¨ Tabla Cosedora Hilo -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("C.Hilo") %>
<!-- ğŸŸ¦ Tabla Binder -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Binder") %>

POST5
<!-- ğŸŸ© Tabla Zechini -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Zechini") %>
<!-- ğŸŸ¨ Tabla Alzadora -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Alzadora") %>
<!-- ğŸŸ¦ Tabla Cos. Alambre -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("C.Alambre") %>

POST6
<!-- ğŸŸ© Tabla Guillotina -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Guillotina") %>
<!-- ğŸŸ¨ Tabla T-Manual -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("T.Manual") %>
<!-- ğŸŸ¦ Tabla Otros -->
<% if orden_trabajo.estado_actual == "TerminaciÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Otros") %>

DIGITAL
<!-- ğŸŸ¦ KÃ³nica Color -->
<% if orden_trabajo.estado_actual == "ImpresiÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Ko") %>
<!-- ğŸŸ¨ KÃ³nica Monocolor -->
<% if orden_trabajo.estado_actual == "ImpresiÃ³n" && cadenatovector(orden_trabajo.procesos).include?("Xe") %>
OFFSET1
<!-- ğŸŸ¦ Tabla SM -->
<% if orden_trabajo.estado_actual == "ImpresiÃ³n" && cadenatovector(orden_trabajo.procesos).include?("SM") %>
<!-- ğŸŸ¨ Tabla PM -->
<% if orden_trabajo.estado_actual == "ImpresiÃ³n" && cadenatovector(orden_trabajo.procesos).include?("PM") %>

OFFSET2
<!-- ğŸŸ¦ Tabla GTO -->
<% if cadenatovector(orden_trabajo.procesos).include?("GTO") %>
<!-- ğŸŸ¨ Tabla SORZ -->
<% if cadenatovector(orden_trabajo.procesos).include?("SORZ") %>

PLANIFICACION TALLER

<% if estado == "en espera" &&!["ImpresiÃ³n", "Pendiente", "TerminaciÃ³n", "Empaque"].include?(orden_trabajo.estado_actual) %>

<%= render partial: "proceso", locals: { proceso: "SM" } %>
              
<%= render partial: "proceso", locals: { proceso: "PM" } %>

<%= render partial: "proceso", locals: { proceso: "GTO" } %>

<%= render partial: "proceso", locals: { proceso: "Ko" } %>

<%= render partial: "proceso", locals: { proceso: "Xe" } %>

<%= render partial: "proceso", locals: { proceso: "SORZ" } %>

<h1 class="m-3 bg-primary text-center p-2 text-white rounded">
  <strong>TERMINACIÃ“N</strong>
</h1>

<!-- ============================
     PROCESOS DE TERMINACIÃ“N
     ============================ -->
<% elsif estado == "LISTO" && orden_trabajo.estado_actual&.match?(/ImpresiÃ³n|TerminaciÃ³n/i) %>

<%= render partial: "proceso", locals: { proceso: "Tipografia" } %>

<%= render partial: "proceso", locals: { proceso: "Binder" } %>

<%= render partial: "proceso", locals: { proceso: "Duplo" } %>

<%= render partial: "proceso", locals: { proceso: "Lam" } %>

<%= render partial: "proceso", locals: { proceso: "Zechini" } %>

<%= render partial: "proceso", locals: { proceso: "Baum" } %>

<%= render partial: "proceso", locals: { proceso: "Fidia" } %>

<%= render partial: "proceso", locals: { proceso: "Buv" } %>

<%= render partial: "proceso", locals: { proceso: "Renz" } %>
